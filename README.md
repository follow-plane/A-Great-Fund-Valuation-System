# 🚀 基金估值 & 股票行情分析助手

这是一个基于 Python 和 Streamlit 开发的专业级个人理财助手系统。它集成了基金持仓管理、深度诊断、股票实时行情分析以及 AI 投资建议等功能，旨在为个人投资者提供一个数字化、专业化的投资管理平台。

## ✨ 核心功能

-   **📈 股票行情与全球指数**:
    -   支持 A 股（沪深）实时行情搜索。
    -   **新增**：全球核心指数实时监控（标普 500、纳斯达克、道琼斯）。
    -   **新增**：支持将任意股票/指数“钉”在仪表盘，打造个性化行情看板。
    -   提供专业分时走势图及 K 线图（日、周、月）。
    -   实时展示五档盘口（买卖 1-5）数据。
    -   交易时段 3 秒级自动局部刷新。
-   **🔍 基金查询与诊断**:
    -   支持基金代码、名称模糊搜索。
    -   集成 **DeepSeek** 深度诊断，生成专业投资报告。
    -   本地量化评分模型（业绩、风险、经理、费率）。
-   **💼 高精度持仓管理**:
    -   持仓成本支持 **4 位小数**（0.0001 精度），拒绝误差。
    -   持有份额支持 **2 位小数**。
    -   实时计算当日预估收益、累计盈亏及资产分布。
-   **📅 智能定投规划**:
    -   支持按周（如每周二）、按月（如每月 15 号）灵活设置定投计划。
    -   基于历史真实净值进行高精度收益回测。
-   **📊 数字化仪表盘**:
    -   总资产实时监控，当日收益动态更新。
    -   集成“自选行情”模块，点击股票可直接跳转分析详情页。
    -   **东方财富**全球 7x24 小时实时快讯，点击标题直达原文。
    -   基于持仓回测的近 30 天资产走势分析。

## 🛠️ 环境准备

-   **Python 版本**: 建议使用 Python 3.9 及以上版本。
-   **依赖库**: 运行本项目需要安装以下核心库。请在 `fund_assistant` 文件夹目录下打开终端，执行以下指令：
    ```bash
    pip install -r requirements.txt
    ```
     
    -   `streamlit`: UI 框架。
    -   `akshare`: 核心金融数据源。
    -   `pandas` & `numpy`: 数据处理。
    -   `plotly`: 专业交互式图表渲染。
    -   `requests`: 网络请求。
    -   `openai`: 用于接入 DeepSeek（兼容 OpenAI 协议）。

## 🚀 快速启动

1.  **克隆或下载项目**到本地。
2.  **创建并激活虚拟环境** (推荐):
    在 `fund_assistant` 文件夹下打开终端：
    ```bash
    # 创建虚拟环境
    python -m venv .venv
    
    # 激活环境 (Windows)
    .\.venv\Scripts\activate
    
    # 激活环境 (Mac/Linux)
    source .venv/bin/activate
    ```
3.  **安装依赖库**:
    ```bash
    pip install -r requirements.txt
    ```
4.  **启动系统**:
    ```bash
    streamlit run app.py
    ```
5.  **访问系统**:
    启动后，在浏览器中打开生成的地址（通常是 `http://localhost:8501`）。

## ⚙️ 配置说明

-   **AI 诊断配置 (持久化保存)**:
    在系统侧边栏的“AI 配置”区域，填入您的 **API Key** 和 **Base URL** (支持 DeepSeek, Doubao 等)。配置会自动保存至本地数据库，无需重复输入。
-   **自动刷新**:
    侧边栏提供“开启自动刷新”开关。开启后，系统将在交易时间内自动同步最新行情数据。

## 🛡️ 数据隐私说明

本系统所有持仓数据及 API Key 配置均存储在本地 `fund_data.db` (SQLite 数据库) 中，**绝不进行任何云端上传**，确保您的资产信息安全隐私。

---
*注：本软件所提供数据及分析结果仅供参考，不构成任何投资建议。*
